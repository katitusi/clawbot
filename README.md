# ğŸ¤– Clawbot - OpenClaw AI Agent Gateway

Production-ready Docker deployment for [OpenClaw](https://github.com/openclaw/openclaw) AI Agent Gateway with best practices, security hardening, and comprehensive configuration.

## ğŸš€ Quick Start

```bash
# Clone this repository
git clone https://github.com/katitusi/clawbot.git
cd clawbot

# Run setup (builds images, configures environment)
./docker-setup.sh

# Or manual start
docker compose up -d openclaw-gateway
```

Access the Control UI at: **http://127.0.0.1:18789/**

## ğŸ“‹ Prerequisites

- Docker Engine 24.0+ with Docker Compose v2
- 4GB+ RAM recommended
- Linux, macOS, or Windows (WSL2)

## ğŸ“ Project Structure

```
clawbot/
â”œâ”€â”€ Dockerfile                    # Multi-stage production image
â”œâ”€â”€ Dockerfile.sandbox            # Agent execution sandbox
â”œâ”€â”€ Dockerfile.sandbox-browser    # Browser automation sandbox
â”œâ”€â”€ docker-compose.yml            # Main compose configuration
â”œâ”€â”€ docker-setup.sh               # Automated setup script
â”œâ”€â”€ .env.example                  # Environment template
â”œâ”€â”€ .gitignore
â”œâ”€â”€ config/
â”‚   â””â”€â”€ openclaw.json.example     # Gateway configuration template
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ sandbox-setup.sh          # Build sandbox images
â”‚   â”œâ”€â”€ start.sh                  # Start gateway
â”‚   â”œâ”€â”€ stop.sh                   # Stop gateway
â”‚   â”œâ”€â”€ backup.sh                 # Backup configuration
â”‚   â””â”€â”€ health-check.sh           # Health monitoring
â””â”€â”€ docs/
    â”œâ”€â”€ ARCHITECTURE.md           # System architecture
    â”œâ”€â”€ SECURITY.md               # Security best practices
    â””â”€â”€ SKILLS.md                 # Skills configuration guide
```

## âš™ï¸ Configuration

### 1. Environment Variables

Copy and configure environment:

```bash
cp .env.example .env
# Edit .env with your settings
```

**Required variables:**
- `OPENCLAW_GATEWAY_TOKEN` - Authentication token (auto-generated by setup)
- `OPENAI_API_KEY` or `ANTHROPIC_API_KEY` - Model provider API keys

### 2. Gateway Configuration

Copy and customize the config template:

```bash
mkdir -p ~/.openclaw
cp config/openclaw.json.example ~/.openclaw/openclaw.json
# Edit with your preferred settings
```

### 3. Skills Configuration

Recommended core skills (configured in `openclaw.json`):

| Skill | Purpose | Priority |
|-------|---------|----------|
| `clawhub` | Skill package manager | **Required** |
| `mcporter` | MCP adapter for tools | **Recommended** |
| `model-usage` | Usage metrics & cost tracking | Recommended |
| `1password` | Secrets management | Production |
| `obsidian` | Knowledge base integration | Optional |
| `himalaya` | Email automation | Optional |

## ğŸ”’ Security Best Practices

This deployment includes several security measures:

### Sandbox Isolation
```json
{
  "agents": {
    "defaults": {
      "sandbox": {
        "mode": "non-main",
        "docker": {
          "readOnlyRoot": true,
          "network": "none",
          "capDrop": ["ALL"],
          "pidsLimit": 256,
          "memory": "1g"
        }
      }
    }
  }
}
```

### Security Policy
- **Default Deny**: All actions denied unless explicitly allowed
- **Scoped Filesystem**: Limited to workspace directory
- **Network Restrictions**: No network by default in sandbox
- **Secret Management**: Vault-only access to credentials

### âš ï¸ Important Security Notes

1. **Never commit `.env`** - Contains secrets
2. **Use strong tokens** - Generate with `openssl rand -hex 32`
3. **Limit network exposure** - Use `127.0.0.1` binding for local-only access
4. **Regular backups** - Run `./scripts/backup.sh` regularly
5. **Monitor logs** - Check for suspicious activity

## ğŸ› ï¸ Common Commands

```bash
# Start gateway
docker compose up -d openclaw-gateway

# View logs
docker compose logs -f openclaw-gateway

# Run CLI commands
docker compose run --rm openclaw-cli <command>

# Onboarding wizard
docker compose run --rm openclaw-cli onboard

# Add channels
docker compose run --rm openclaw-cli channels login           # WhatsApp QR
docker compose run --rm openclaw-cli channels add --channel telegram --token <token>

# Health check
./scripts/health-check.sh

# Stop gateway
docker compose down

# Rebuild images
docker compose build --no-cache
```

## ğŸ”§ Troubleshooting

### Gateway won't start
```bash
# Check logs
docker compose logs openclaw-gateway

# Verify environment
docker compose config

# Check port availability
netstat -tulpn | grep 18789
```

### Sandbox issues
```bash
# Rebuild sandbox images
./scripts/sandbox-setup.sh

# Check Docker socket permissions
ls -la /var/run/docker.sock
```

### Token issues
```bash
# Regenerate token
export OPENCLAW_GATEWAY_TOKEN=$(openssl rand -hex 32)
# Update .env file
```

## ğŸ“Š Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Control UI (Browser)                      â”‚
â”‚                    http://127.0.0.1:18789/                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     OpenClaw Gateway                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Router    â”‚  â”‚   Planner   â”‚  â”‚     Model Providers     â”‚  â”‚
â”‚  â”‚  (WebSocket)â”‚  â”‚   Agent     â”‚  â”‚  (OpenAI/Anthropic/etc) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Sandbox Layer                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Base Sandbox   â”‚  â”‚ Browser Sandbox â”‚  â”‚  Custom Image   â”‚  â”‚
â”‚  â”‚  (Isolated CLI) â”‚  â”‚   (Playwright)  â”‚  â”‚  (Your Tools)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Skills / Tools                             â”‚
â”‚  clawhub â”‚ mcporter â”‚ 1password â”‚ himalaya â”‚ obsidian â”‚ ...    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“š Documentation

- [OpenClaw Official Docs](https://docs.openclaw.ai/)
- [Docker Installation Guide](https://docs.openclaw.ai/install/docker)
- [Sandboxing Configuration](https://docs.openclaw.ai/gateway/sandboxing)
- [Skills Reference](https://docs.openclaw.ai/skills)

## ğŸ¤ Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## â­ Acknowledgments

- [OpenClaw](https://github.com/openclaw/openclaw) - The original AI agent framework
- Docker best practices from the official documentation
- Security guidelines from OWASP and CIS benchmarks
